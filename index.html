<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Kuis Ramadhan</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&family=Signika:wght@400;700&family=Kanit&family=Acme&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js"></script>
    <script src="https://unpkg.com/tone"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/lottie-web/5.12.2/lottie.min.js"></script>
    <style>
        body {
            font-family: 'Roboto', sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background-color: #1A3C34;
            margin: 0;
            padding: 0;
            width: 100%;
            overflow-x: hidden;
            position: relative;
        }

        #gameArea {
            background-color: #fff;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            text-align: center;
            max-width: 100%;
            width: 95%;
            box-sizing: border-box;
            position: relative;
        }

        #timerContainer {
            display: flex;
            justify-content: center;
            align-items: center;
            margin-bottom: 15px;
        }

        #timerIcon {
            width: 40px;
            height: 40px;
            margin-right: 10px;
        }

        #timer {
            font-family: 'Acme', sans-serif;
            font-size: 40px;
            color: #2E4A47;
        }

        #judulGame {
            font-family: 'Signika', sans-serif;
            font-size: 50px;
            color: #D4AF37;
            margin-bottom: 15px;
            font-weight: bold;
        }
        #judulGame.ramadhan {
            color: #D4AF37;
        }

        #petunjuk {
            font-size: 24px;
            margin-bottom: 20px;
            color: #333;
        }

        #pilihanGanda {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            margin-bottom: 20px;
        }

        #pilihanGanda button {
            font-size: 24px;
            padding: 12px 20px;
            margin: 8px;
            border: none;
            border-radius: 8px;
            background-color: #F5E8C7;
            color: #2E4A47;
            cursor: pointer;
            transition: background-color 0.3s ease;
            flex: 1 1 auto;
            min-width: 150px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            box-sizing: border-box;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        #pilihanGanda button:hover {
            background-color: #E8DAB2;
        }

        #pilihanGanda button.selected {
            background-color: #f0ad4e;
        }

        #pilihanGanda button.salah {
            background-color: #FF0000;
            animation: shake 0.5s;
        }
        @keyframes shake {
            0% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            50% { transform: translateX(5px); }
            75% { transform: translateX(-5px); }
            100% { transform: translateX(0); }
        }

        #hasil {
            font-size: 24px;
            margin-top: 20px;
            font-weight: bold;
            color: #333;
        }

        #lottie-container {
            position: absolute;
            top: 10px;
            right: 10px;
            width: 100px;
            height: 100px;
            pointer-events: none;
            z-index: 1000;
        }

        @media (max-width: 768px) {
            #judulGame {
                font-size: 40px;
            }
            #petunjuk {
                font-size: 20px;
            }
            #pilihanGanda button {
                font-size: 18px;
                padding: 10px 16px;
                min-width: 120px;
            }
            #hasil {
                font-size: 20px;
            }
            #timer {
                font-size: 30px;
            }
            #timerIcon {
                width: 30px;
                height: 30px;
            }
            #lottie-container {
                width: 80px;
                height: 80px;
            }
        }

        @media (max-width: 600px) {
            #pilihanGanda button {
                flex: 1 1 100%;
                margin: 8px 0;
            }
            #timer {
                font-size: 25px;
            }
            #timerIcon {
                width: 25px;
                height: 25px;
            }
            #lottie-container {
                width: 60px;
                height: 60px;
            }
        }
        #skor {
            position: absolute;
            bottom: 10px;
            right: 10px;
            font-size: 18px;
            font-weight: bold;
            color: #333;
        }
        #skorBenar {
            color: #00FF00;
        }
        #skorSalah {
            color: #FF0000;
        }

        #startButton {
            font-size: 24px;
            padding: 12px 20px;
            margin: 8px;
            border: none;
            border-radius: 8px;
            background-color: #F5E8C7;
            color: #2E4A47;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }

        #startButton:hover {
            background-color: #E8DAB2;
        }

        #bismillah {
            font-size: 20px;
            color: #333;
            margin-top: 10px;
        }

        #skorAkhir {
            font-size: 28px;
            font-weight: bold;
        }

        @keyframes popup {
            0% {
                transform: scale(0);
                opacity: 0;
            }
            50% {
                transform: scale(1.2);
                opacity: 1;
            }
            100% {
                transform: scale(1);
                opacity: 1;
            }
        }

        .popup-animation {
            animation: popup 0.5s ease-in-out forwards;
        }

        #copyright {
            position: absolute;
            top: 10px;
            right: 10px;
            font-family: 'Kanit', sans-serif;
            font-size: 14px;
            color: #F5E8C7;
        }
    </style>
</head>
<body>
    <div id="gameArea">
        <div id="timerContainer" style="display: none;">
            <img id="timerIcon" src="https://img.icons8.com/ios-filled/50/2E4A47/hourglass.png" alt="Hourglass">
            <span id="timer">02:00</span>
        </div>
        <h1 id="judulGame">Kuis Ramadhan</h1>
        <p id="petunjuk">Selamat datang di Kuis Ramadhan!</p>
        <div id="startScreen">
            <button id="startButton">Start</button>
            <p id="bismillah">Bismillah</p>
        </div>
        <div id="pilihanGanda" style="display: none;">
            <button id="pilihanA"></button>
            <button id="pilihanB"></button>
            <button id="pilihanC"></button>
            <button id="pilihanD"></button>
        </div>
        <p id="hasil"></p>
        <div id="lottie-container"></div>
        <div id="skor" style="display: none;">
            Benar: <span id="skorBenar">0</span> / Salah: <span id="skorSalah">0</span>
        </div>
    </div>
    <div id="copyright">© Mas Har</div>
    <script>
        const dataTebakan = [
            {
                deskripsi: "Apa hubungan kekerabatan (sebelum menikah) Mbak Kaum Ridwan dan Mbah Siti Aisyah?",
                jawaban: "Memiliki mbah yang sama dari jalur ibu",
                pilihan: ["Tidak ada hubungan kekerabatan", "Memiliki mbah yang sama dari jalur bapak", "Memiliki mbah yang sama dari jalur ibu", "Memiliki buyut yang sama"],
                judul: "Kuis Ramadhan",
                kategori: "ramadhan"
            },
            {
                deskripsi: "Siapa nama kakek Mbah Kaum Ridwan?",
                jawaban: "H. Ibrahim",
                pilihan: ["H. Ibrahim", "Hasan Besari", "Ahmad Pandi", "Murdhi"],
                judul: "Kuis Ramadhan",
                kategori: "ramadhan"
            },
            {
                deskripsi: "Doa apa yang diajarkan Nabi agar banyak dibaca pada malam-malam Lailatul Qadar?",
                jawaban: "Allahumma innaka ‘afuwwun tuhibbul ‘afwa... dst",
                pilihan: ["Rabbighfirli waliwalidayya... dst", "Allahumma innaka ‘afuwwun tuhibbul ‘afwa... dst", "Rabbana atina fiddunya... dst", "Astaghfirullah... dst"],
                judul: "Kuis Ramadhan",
                kategori: "ramadhan"
            },
            {
                deskripsi: "Kapan sunnahnya kita mengunjungi atau berziarah kubur?",
                jawaban: "Kapan saja/tidak ada waktu khusus",
                pilihan: ["Sebelum berpuasa", "Sebelum Idul Fitri", "Sebelum Idul Fitri dan sebelum berpuasa", "Kapan saja/tidak ada waktu khusus"],
                judul: "Kuis Ramadhan",
                kategori: "ramadhan"
            },
            {
                deskripsi: "Apa tujuan utama dari ziarah kubur?",
                jawaban: "Lebih mengingatkan hari akhirat",
                pilihan: ["Lebih mengingatkan hari akhirat", "Mengenang keluarga yang sudah wafat", "Mengirimkan doa", "Agar lokasi kuburan terawat"],
                judul: "Kuis Ramadhan",
                kategori: "ramadhan"
            },
            {
                deskripsi: "Mengapa Mbah Kaum Ridwan dan Mbah Kambali saling bersaudara?",
                jawaban: "Memiliki istri yang kakak beradik",
                pilihan: ["Memiliki mbah yang sama dari jalur ibu", "Memiliki mbah yang sama dari jalur ayah", "Kakak ipar/adik ipar", "Memiliki istri yang kakak beradik"],
                judul: "Kuis Ramadhan",
                kategori: "ramadhan"
            },
            {
                deskripsi: "Mana amalan yang tidak disunnahkan sebelum atau sesudah sholat Idul Fitri?",
                jawaban: "Berpuasa sejenak",
                pilihan: ["Berpuasa sejenak", "Mandi sebelum sholat", "Memilih jalan yang berbeda ketika berangkat dan pulang", "Memakai pakaian terbaik yang dimiliki"],
                judul: "Kuis Ramadhan",
                kategori: "ramadhan"
            },
            {
                deskripsi: "Kapan waktu mulai wajib puasa?",
                jawaban: "Sejak waktu fajar sampai matahari tenggelam",
                pilihan: ["Sejak terbit matahari sampai matahari tenggelam", "Sejak terdengar adzan Subuh sampai adzan Maghrib", "Sejak waktu imsak sampai matahari tenggelam", "Sejak waktu fajar sampai matahari tenggelam"],
                judul: "Kuis Ramadhan",
                kategori: "ramadhan"
            },
            {
                deskripsi: "Apa tujuan utama dari berpuasa?",
                jawaban: "Agar menjadi hamba yang bertakwa",
                pilihan: ["Agar tubuh menjadi sehat", "Agar bisa merasakan kondisi orang miskin", "Agar menjadi hamba yang bertakwa", "Agar berlatih menjaga emosi"],
                judul: "Kuis Ramadhan",
                kategori: "ramadhan"
            },
            {
                deskripsi: "Apa arti ketika ada burung gagak/kreak berbunyi di malam hari?",
                jawaban: "Tidak berarti apa-apa",
                pilihan: ["Tidak berarti apa-apa", "Tanda akan ada orang yang meninggal", "Tanda sial, sebaiknya jangan banyak beraktivitas", "Tanda ada orang yang sedang sakit"],
                judul: "Kuis Ramadhan",
                kategori: "ramadhan"
            },
            {
                deskripsi: "Apa arti tauhid \"La ilaha illallah\"?",
                jawaban: "Tidak ada yang berhak disembah kecuali Allah",
                pilihan: ["Tidak ada pencipta kecuali Allah", "Tidak ada yang berhak disembah kecuali Allah", "Tidak ada yang dipatuhi kecuali Allah", "Tidak ada hukum kecuali hukum Allah"],
                judul: "Kuis Ramadhan",
                kategori: "ramadhan"
            },
            {
                deskripsi: "Bagaimana keyakinan kita terhadap orang non-Muslim bila tetap dalam agamanya sampai meninggal?",
                jawaban: "Mereka akan kekal di dalam neraka",
                pilihan: ["Mereka akan menemukan jalan surganya sendiri", "Mereka akan kekal di dalam neraka", "Mereka akan masuk neraka sementara", "Tidak tahu"],
                judul: "Kuis Ramadhan",
                kategori: "ramadhan"
            },
            {
                deskripsi: "Bagaimana sikap kita terhadap orang Kristen yang mengucapkan selamat kepada kita ketika Idul Fitri?",
                jawaban: "Menerimanya, namun tidak membalasnya saat Natal",
                pilihan: ["Menerimanya dan membalasnya saat Natal", "Menolak ucapannya dengan baik-baik", "Menerimanya, namun tidak membalasnya saat Natal"],
                judul: "Kuis Ramadhan",
                kategori: "ramadhan"
            },
            {
                deskripsi: "Siapa yang bukan anaknya Mbah Marzuki?",
                jawaban: "Mami",
                pilihan: ["Sendur", "Mami", "Marsini", "Pardi"],
                judul: "Kuis Ramadhan",
                kategori: "ramadhan"
            },
            {
                deskripsi: "Apa hubungan kekerabatan Mbah Ridho dan Mbah Marsiyem?",
                jawaban: "Memiliki mbah yang sama dari jalur bapak",
                pilihan: ["Memiliki mbah yang sama dari jalur bapak", "Memiliki mbah yang sama dari jalur ibu", "Memiliki buyut yang sama"],
                judul: "Kuis Ramadhan",
                kategori: "ramadhan"
            },
        ];

        let soalSaatIni;
        let synth = new Tone.Synth().toDestination();
        let jawabanBenar = false;
        let kategoriSoal = "ramadhan";
        let skorBenar = 0;
        let skorSalah = 0;
        let soalSudahDitampilkan = new Set();
        let nomorSoal = 0;
        const totalSoal = 15;
        let isStartSoundPlayed = false;
        let timerInterval = null;
        let timeLeft = 120;
        let isGameOverSoundPlayed = false;
        let lottieAnimation = null; // Variabel untuk melacak animasi Lottie

        const lottieData = {"nm":"Success","ddd":0,"h":200,"w":200,"meta":{"a":"Inktwin","k":"Successful animation, check, success, congrats, cangratulation","d":"Successful animation","g":"LottieFiles AE 0.1.20"},"layers":[{"ty":4,"nm":"Shape Layer 4","sr":1,"st":13,"op":973,"ip":48,"hd":false,"ddd":0,"bm":0,"hasMask":false,"ao":0,"ks":{"a":{"a":0,"k":[77,2,0],"ix":1},"s":{"a":0,"k":[55.682,55.682,100],"ix":6},"sk":{"a":0,"k":0},"p":{"a":0,"k":[-5.051,60.949,0],"ix":2},"r":{"a":0,"k":0,"ix":10},"sa":{"a":0,"k":0},"o":{"a":1,"k":[{"o":{"x":0.333,"y":0},"i":{"x":0,"y":1},"s":[100],"t":60},{"s":[0],"t":70}],"ix":11}},"ef":[],"shapes":[{"ty":"gr","bm":0,"hd":false,"mn":"ADBE Vector Group","nm":"Shape 2","ix":1,"cix":2,"np":3,"it":[{"ty":"sh","bm":0,"hd":false,"mn":"ADBE Vector Shape - Group","nm":"Path 1","ix":1,"d":1,"ks":{"a":0,"k":{"c":false,"i":[[0,0]],"o":[[0,0]],"v":[[955.194,251.637]]},"ix":2}},{"ty":"st","bm":0,"hd":false,"mn":"ADBE Vector Graphic - Stroke","nm":"Stroke 1","lc":1,"lj":1,"ml":4,"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":64,"ix":5},"c":{"a":0,"k":[1,1,1],"ix":3}},{"ty":"tr","a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"sk":{"a":0,"k":0,"ix":4},"p":{"a":0,"k":[0,0],"ix":2},"r":{"a":0,"k":0,"ix":6},"sa":{"a":0,"k":0,"ix":5},"o":{"a":0,"k":100,"ix":7}}]},{"ty":"gr","bm":0,"hd":false,"mn":"ADBE Vector Group","nm":"Shape 1","ix":2,"cix":2,"np":3,"it":[{"ty":"sh","bm":0,"hd":false,"mn":"ADBE Vector Shape - Group","nm":"Path 1","ix":1,"d":1,"ks":{"a":0,"k":{"c":false,"i":[[-236,0],[0,169.697],[223.622,0],[0,0],[0,0],[0,0],[0,0]],"o":[[232.172,0],[0,-178.341],[-228.293,0],[0,0],[0,0],[0,0],[0,0]],"v":[[54.299,326.269],[430.045,-2.319],[81.56,-379.819],[-238.557,-171.999],[-56,6],[30,92],[210,-88]]},"ix":2}},{"ty":"st","bm":0,"hd":false,"mn":"ADBE Vector Graphic - Stroke","nm":"Stroke 1","lc":2,"lj":2,"ml":1,"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":64,"ix":5},"c":{"a":0,"k":[1,1,1],"ix":3}},{"ty":"tr","a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"sk":{"a":0,"k":0,"ix":4},"p":{"a":0,"k":[0,0],"ix":2},"r":{"a":0,"k":0,"ix":6},"sa":{"a":0,"k":0,"ix":5},"o":{"a":0,"k":100,"ix":7}}]},{"ty":"tm","bm":0,"hd":false,"mn":"ADBE Vector Filter - Trim","nm":"Trim Paths 1","ix":3,"e":{"a":1,"k":[{"o":{"x":0.851,"y":0},"i":{"x":0,"y":1},"s":[100],"t":49},{"s":[0],"t":70}],"ix":2},"o":{"a":0,"k":0,"ix":3},"s":{"a":1,"k":[{"o":{"x":0.851,"y":0},"i":{"x":0,"y":1},"s":[83],"t":48},{"s":[0],"t":69}],"ix":1},"m":1}],"ind":1,"parent":4},{"ty":4,"nm":"Shape Layer 2","sr":1,"st":0,"op":49,"ip":0,"hd":false,"ddd":0,"bm":0,"hasMask":false,"ao":0,"ks":{"a":{"a":0,"k":[77,2,0],"ix":1},"s":{"a":0,"k":[55.682,55.682,100],"ix":6},"sk":{"a":0,"k":0},"p":{"a":0,"k":[-5.051,60.949,0],"ix":2},"r":{"a":0,"k":0,"ix":10},"sa":{"a":0,"k":0},"o":{"a":0,"k":100,"ix":11}},"ef":[],"shapes":[{"ty":"gr","bm":0,"hd":false,"mn":"ADBE Vector Group","nm":"Shape 1","ix":1,"cix":2,"np":3,"it":[{"ty":"sh","bm":0,"hd":false,"mn":"ADBE Vector Shape - Group","nm":"Path 1","ix":1,"d":1,"ks":{"a":0,"k":{"c":false,"i":[[0,0],[0,0],[0,0]],"o":[[0,0],[0,0],[0,0]],"v":[[-56,6],[30,92],[210,-88]]},"ix":2}},{"ty":"st","bm":0,"hd":false,"mn":"ADBE Vector Graphic - Stroke","nm":"Stroke 1","lc":2,"lj":2,"ml":1,"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":64,"ix":5},"c":{"a":0,"k":[1,1,1],"ix":3}},{"ty":"fl","bm":0,"hd":false,"mn":"ADBE Vector Graphic - Fill","nm":"Fill 1","c":{"a":0,"k":[0.2039,0.4667,0.4196],"ix":4},"r":1,"o":{"a":0,"k":100,"ix":5}},{"ty":"tr","a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"sk":{"a":0,"k":0,"ix":4},"p":{"a":0,"k":[0,0],"ix":2},"r":{"a":0,"k":0,"ix":6},"sa":{"a":0,"k":0,"ix":5},"o":{"a":0,"k":100,"ix":7}}]},{"ty":"tm","bm":0,"hd":false,"mn":"ADBE Vector Filter - Trim","nm":"Trim Paths 1","ix":2,"e":{"a":1,"k":[{"o":{"x":0.333,"y":0},"i":{"x":0,"y":1},"s":[0],"t":12},{"s":[100],"t":24}],"ix":2},"o":{"a":0,"k":0,"ix":3},"s":{"a":0,"k":0,"ix":1},"m":1}],"ind":2,"parent":4},{"ty":4,"nm":"Shape Layer 3","sr":1,"st":-3,"op":957,"ip":-3,"hd":false,"ddd":0,"bm":0,"hasMask":false,"ao":0,"ks":{"a":{"a":0,"k":[0,0,0],"ix":1},"s":{"a":0,"k":[25,25,100],"ix":6},"sk":{"a":0,"k":0},"p":{"a":0,"k":[101.49999999999999,92.5,0],"ix":2},"r":{"a":0,"k":0,"ix":10},"sa":{"a":0,"k":0},"o":{"a":0,"k":100,"ix":11}},"ef":[],"shapes":[{"ty":"gr","bm":0,"hd":false,"mn":"ADBE Vector Group","nm":"Shape 1","ix":1,"cix":2,"np":3,"it":[{"ty":"sh","bm":0,"hd":false,"mn":"ADBE Vector Shape - Group","nm":"Path 1","ix":1,"d":1,"ks":{"a":0,"k":{"c":false,"i":[[0,0],[0,0]],"o":[[0,0],[0,0]],"v":[[-8,-78],[-8,-254]]},"ix":2}},{"ty":"st","bm":0,"hd":false,"mn":"ADBE Vector Graphic - Stroke","nm":"Stroke 1","lc":2,"lj":2,"ml":1,"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":20,"ix":5},"c":{"a":0,"k":[1,1,1],"ix":3}},{"ty":"fl","bm":0,"hd":false,"mn":"ADBE Vector Graphic - Fill","nm":"Fill 1","c":{"a":0,"k":[0.2039,0.4667,0.4196],"ix":4},"r":1,"o":{"a":0,"k":100,"ix":5}},{"ty":"tr","a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"sk":{"a":0,"k":0,"ix":4},"p":{"a":0,"k":[0,0],"ix":2},"r":{"a":0,"k":0,"ix":6},"sa":{"a":0,"k":0,"ix":5},"o":{"a":0,"k":100,"ix":7}}]},{"ty":"tm","bm":0,"hd":false,"mn":"ADBE Vector Filter - Trim","nm":"Trim Paths 1","ix":2,"e":{"a":1,"k":[{"o":{"x":0.333,"y":0},"i":{"x":0,"y":1},"s":[0],"t":9},{"s":[100],"t":21}],"ix":2},"o":{"a":0,"k":0,"ix":3},"s":{"a":1,"k":[{"o":{"x":0.333,"y":0},"i":{"x":0,"y":1},"s":[0],"t":11},{"s":[100],"t":23}],"ix":1},"m":1},{"ty":"rp","bm":0,"hd":false,"mn":"ADBE Vector Filter - Repeater","nm":"Repeater 1","ix":3,"m":1,"c":{"a":0,"k":10,"ix":1},"o":{"a":0,"k":0,"ix":2},"tr":{"a":{"a":0,"k":[-9,17],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"sk":{"a":0,"k":0},"p":{"a":0,"k":[0,0],"ix":2},"r":{"a":0,"k":36,"ix":4},"sa":{"a":0,"k":0},"so":{"a":0,"k":100,"ix":5},"eo":{"a":0,"k":100,"ix":6}}}],"ind":3},{"ty":4,"nm":"Shape Layer 1","sr":1,"st":0,"op":960,"ip":0,"hd":false,"ddd":0,"bm":0,"hasMask":false,"ao":0,"ks":{"a":{"a":0,"k":[-5.051,60.949,0],"ix":1},"s":{"a":1,"k":[{"o":{"x":0.333,"y":0},"i":{"x":0.833,"y":0.833},"s":[0,0,100],"t":0},{"s":[25,25,100],"t":12}],"ix":6,"x":"var $bm_rt;\nvar amp, freq, decay, n, n, t, t, v;\namp = 0.06;\nfreq = 2;\ndecay = 4;\n$bm_rt = n = 0;\nif (numKeys > 0) {\n    $bm_rt = n = nearestKey(time).index;\n    if (key(n).time > time) {\n        n--;\n    }\n}\nif (n == 0) {\n    $bm_rt = t = 0;\n} else {\n    $bm_rt = t = $bm_sub(time, key(n).time);\n}\nif (n > 0) {\n    v = velocityAtTime($bm_sub(key(n).time, $bm_div(thisComp.frameDuration, 10)));\n    $bm_rt = $bm_sum(value, $bm_div($bm_mul($bm_mul(v, amp), Math.sin($bm_mul($bm_mul($bm_mul(freq, t), 2), Math.PI))), Math.exp($bm_mul(decay, t))));\n} else {\n    $bm_rt = value;\n}"},"sk":{"a":0,"k":0},"p":{"a":0,"k":[100,100,0],"ix":2},"r":{"a":1,"k":[{"o":{"x":0.333,"y":0},"i":{"x":0.833,"y":0.833},"s":[45],"t":0},{"s":[0],"t":12}],"ix":10,"x":"var $bm_rt;\nvar amp, freq, decay, n, n, t, t, v;\namp = 0.06;\nfreq = 2;\ndecay = 4;\n$bm_rt = n = 0;\nif (numKeys > 0) {\n    $bm_rt = n = nearestKey(time).index;\n    if (key(n).time > time) {\n        n--;\n    }\n}\nif (n == 0) {\n    $bm_rt = t = 0;\n} else {\n    $bm_rt = t = $bm_sub(time, key(n).time);\n}\nif (n > 0) {\n    v = velocityAtTime($bm_sub(key(n).time, $bm_div(thisComp.frameDuration, 10)));\n    $bm_rt = $bm_sum(value, $bm_div($bm_mul($bm_mul(v, amp), Math.sin($bm_mul($bm_mul($bm_mul(freq, t), 2), Math.PI))), Math.exp($bm_mul(decay, t))));\n} else {\n    $bm_rt = value;\n}"},"sa":{"a":0,"k":0},"o":{"a":1,"k":[{"o":{"x":0.333,"y":0},"i":{"x":0,"y":1},"s":[100],"t":56},{"s":[0],"t":64}],"ix":11}},"ef":[],"shapes":[{"ty":"gr","bm":0,"hd":false,"mn":"ADBE Vector Group","nm":"Shape 1","ix":1,"cix":2,"np":2,"it":[{"ty":"st","bm":0,"hd":false,"mn":"ADBE Vector Graphic - Stroke","nm":"Stroke 1","lc":1,"lj":1,"ml":4,"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":8,"ix":5},"c":{"a":0,"k":[0.2039,0.4667,0.4196],"ix":3}},{"ty":"fl","bm":0,"hd":false,"mn":"ADBE Vector Graphic - Fill","nm":"Fill 1","c":{"a":0,"k":[0.2039,0.4667,0.4196],"ix":4},"r":1,"o":{"a":0,"k":100,"ix":5}},{"ty":"tr","a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"sk":{"a":0,"k":0,"ix":4},"p":{"a":0,"k":[0,0],"ix":2},"r":{"a":0,"k":0,"ix":6},"sa":{"a":0,"k":0,"ix":5},"o":{"a":0,"k":100,"ix":7}}]},{"ty":"gr","bm":0,"hd":false,"mn":"ADBE Vector Group","nm":"Ellipse 1","ix":2,"cix":2,"np":3,"it":[{"ty":"el","bm":0,"hd":false,"mn":"ADBE Vector Shape - Ellipse","nm":"Ellipse Path 1","d":1,"p":{"a":0,"k":[0,0],"ix":3},"s":{"a":0,"k":[393.898,393.898],"ix":2}},{"ty":"st","bm":0,"hd":false,"mn":"ADBE Vector Graphic - Stroke","nm":"Stroke 1","lc":1,"lj":1,"ml":4,"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":8,"ix":5},"c":{"a":0,"k":[0.2039,0.4667,0.4196],"ix":3}},{"ty":"fl","bm":0,"hd":false,"mn":"ADBE Vector Graphic - Fill","nm":"Fill 1","c":{"a":0,"k":[0.2039,0.4667,0.4196],"ix":4},"r":1,"o":{"a":0,"k":100,"ix":5}},{"ty":"tr","a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"sk":{"a":0,"k":0,"ix":4},"p":{"a":0,"k":[-5.051,44.949],"ix":2},"r":{"a":0,"k":0,"ix":6},"sa":{"a":0,"k":0,"ix":5},"o":{"a":0,"k":100,"ix":7}}]}],"ind":4}],"v":"5.5.7","fr":24,"op":48,"ip":0,"assets":[]};

        function playSound(type) {
            if (type === 'success') {
                const audio = new Audio('success.wav');
                audio.play();
            } else if (type === 'fail') {
                const audio = new Audio('gameover.wav');
                audio.play();
            } else if (type === 'gameover' && !isGameOverSoundPlayed) {
                const audio = new Audio('alhamdulillah.mp3');
                audio.play();
                isGameOverSoundPlayed = true;
            } else if (type === 'start' && !isStartSoundPlayed) {
                const audio = new Audio('ping.wav');
                audio.play();
                isStartSoundPlayed = true;
            }
        }

        function updateTimer() {
            let minutes = Math.floor(timeLeft / 60);
            let seconds = timeLeft % 60;
            document.getElementById("timer").textContent = 
                `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            if (timeLeft <= 0) {
                clearInterval(timerInterval);
                timerInterval = null;
                skorSalah += (totalSoal - (skorBenar + skorSalah));
                akhirPermainan();
            }
            timeLeft--;
        }

        function mulaiPermainan() {
            document.getElementById("startScreen").style.display = "none";
            document.getElementById("timerContainer").style.display = "flex";
            document.getElementById("pilihanGanda").style.display = "flex";
            document.getElementById("skor").style.display = "block";

            const gameArea = document.getElementById("gameArea");
            gameArea.classList.add("popup-animation");
            playSound('start');

            if (!timerInterval) {
                timeLeft = 120;
                updateTimer();
                timerInterval = setInterval(updateTimer, 1000);
            }

            setTimeout(() => {
                gameArea.classList.remove("popup-animation");
            }, 500);

            jawabanBenar = false;
            nomorSoal++;

            let soalRamadhan = dataTebakan.filter(soal => soal.kategori === "ramadhan" && !soalSudahDitampilkan.has(soal));
            if (soalRamadhan.length === 0) {
                clearInterval(timerInterval);
                timerInterval = null;
                document.getElementById("judulGame").textContent = "Semua pertanyaan sudah terjawab!";
                document.getElementById("petunjuk").textContent = "Terima kasih sudah bermain!";
                document.getElementById("pilihanGanda").innerHTML = "";
                document.getElementById("hasil").textContent = "";
                document.getElementById("timerContainer").style.display = "none";
                playSound('gameover');
                return;
            }

            soalSaatIni = soalRamadhan[Math.floor(Math.random() * soalRamadhan.length)];
            soalSudahDitampilkan.add(soalSaatIni);

            document.getElementById("judulGame").textContent = soalSaatIni.judul;
            document.getElementById("judulGame").className = soalSaatIni.kategori;

            document.getElementById("petunjuk").textContent = soalSaatIni.deskripsi;

            const pilihanContainer = document.getElementById("pilihanGanda");
            pilihanContainer.innerHTML = '';
            const shuffledPilihan = [...soalSaatIni.pilihan];
            for (let i = 0; i < shuffledPilihan.length; i++) {
                const button = document.createElement("button");
                button.textContent = shuffledPilihan[i];
                button.onclick = function() {
                    if (!jawabanBenar && timeLeft > 0) {
                        cekJawaban(shuffledPilihan[i], button);
                    }
                };
                pilihanContainer.appendChild(button);
            }
            document.getElementById("hasil").textContent = "";
            resetPilihan();

            document.getElementById("skorBenar").textContent = skorBenar;
            document.getElementById("skorSalah").textContent = skorSalah;
        }

        function cekJawaban(jawabanYangDipilih, buttonElement) {
            if (jawabanYangDipilih === soalSaatIni.jawaban) {
                document.getElementById("hasil").textContent = "Benar!";
                triggerLottieAnimation();
                playSound('success');
                jawabanBenar = true;
                skorBenar++;
                document.getElementById("skorBenar").textContent = skorBenar;
                setTimeout(() => {
                    if (nomorSoal < totalSoal && timeLeft > 0) {
                        mulaiPermainan();
                    } else {
                        clearInterval(timerInterval);
                        timerInterval = null;
                        akhirPermainan();
                    }
                }, 2000);
            } else {
                document.getElementById("hasil").textContent = "Salah!";
                playSound('fail');
                buttonElement.classList.add("salah");
                buttonElement.style.animationPlayState = 'running';
                skorSalah++;
                document.getElementById("skorSalah").textContent = skorSalah;
                setTimeout(() => {
                    if (nomorSoal < totalSoal && timeLeft > 0) {
                        mulaiPermainan();
                    } else {
                        clearInterval(timerInterval);
                        timerInterval = null;
                        akhirPermainan();
                    }
                }, 500);
            }
        }

        function resetPilihan() {
            const pilihanButtons = document.querySelectorAll("#pilihanGanda button");
            pilihanButtons.forEach(button => {
                button.classList.remove("selected");
                button.classList.remove("salah");
                button.style.animationPlayState = 'paused';
            });
        }

        function triggerLottieAnimation() {
            const container = document.getElementById("lottie-container");

            if (lottieAnimation) {
                lottieAnimation.destroy();
                lottieAnimation = null;
            }

            container.innerHTML = "";

            lottieAnimation = lottie.loadAnimation({
                container: container,
                renderer: 'svg',
                loop: false,
                autoplay: true,
                animationData: lottieData
            });

            setTimeout(() => {
                if (lottieAnimation) {
                    lottieAnimation.destroy();
                    lottieAnimation = null;
                }
                container.innerHTML = "";
            }, 2000);
        }

        function akhirPermainan() {
            const skorAkhir = (skorBenar / totalSoal) * 100;
            let warnaSkor;
            let komentar;

            if (skorAkhir >= 80) {
                warnaSkor = "#00FF00";
                komentar = "Kamu lumayan pinter yah...";
            } else if (skorAkhir >= 60 && skorAkhir < 80) {
                warnaSkor = "#FF8C00";
                komentar = "Score kamu lumayan...";
            } else {
                warnaSkor = "#FF0000";
                komentar = "Semangat, belajar lagi ya!";
            }

            document.getElementById("judulGame").textContent = "Permainan Selesai!";
            document.getElementById("petunjuk").innerHTML = `
                <span id="skorAkhir" style="color: ${warnaSkor};">Skor Akhir Anda: ${skorAkhir.toFixed(2)}%</span><br>
                Benar: ${skorBenar}<br>Salah: ${skorSalah}<br><br>${komentar}
            `;
            document.getElementById("pilihanGanda").innerHTML = "";
            document.getElementById("hasil").textContent = "";
            document.getElementById("timerContainer").style.display = "none";
            playSound('gameover');
        }

        document.getElementById("startButton").addEventListener("click", mulaiPermainan);
    </script>
</body>
</html>
